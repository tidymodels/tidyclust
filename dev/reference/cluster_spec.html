<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Model Specification Information — cluster_spec • tidyclust</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/Source_Sans_Pro-0.4.10/font.css" rel="stylesheet"><link href="../deps/Source_Code_Pro-0.4.10/font.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Model Specification Information — cluster_spec"><meta name="description" content='An object with class "cluster_spec" is a container for information about a
model that will be fit.'><meta property="og:description" content='An object with class "cluster_spec" is a container for information about a
model that will be fit.'><meta property="og:image" content="https://tidyclust.tidymodels.org/logo.svg"><meta name="robots" content="noindex"><script defer data-domain="tidyclust.tidymodels.org,all.tidymodels.org" src="https://plausible.io/js/plausible.js"></script></head><body>
    <a href="#container" class="visually-hidden-focusable">Skip to content</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-none" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">tidyclust</a>

    <small class="nav-text text-danger me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="In-development version">0.2.4.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/hier_clust.html">Hierarchical Clustering</a></li>
    <li><a class="dropdown-item" href="../articles/k_means.html">k-means</a></li>
    <li><a class="dropdown-item" href="../articles/tuning_and_metrics.html">Tuning Cluster Models</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/tidymodels/tidyclust/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic" id="container">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.svg" class="logo" alt=""><h1>Model Specification Information</h1>
      <small class="dont-index">Source: <a href="https://github.com/tidymodels/tidyclust/blob/main/R/model_object_docs.R" class="external-link"><code>R/model_object_docs.R</code></a></small>
      <div class="d-none name"><code>cluster_spec.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>An object with class "cluster_spec" is a container for information about a
model that will be fit.</p>
    </div>


    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>The following model types are implemented in tidyclust:</p><ul><li><p>K-Means in <code><a href="k_means.html">k_means()</a></code></p></li>
<li><p>Hierarchical (Agglomerative) Clustering in <code><a href="hier_clust.html">hier_clust()</a></code></p></li>
</ul><p>The main elements of the object are:</p><ul><li><p><code>args</code>: A vector of the main arguments for the model. The
names of these arguments may be different from their counterparts n the
underlying model function. For example, for a <code><a href="k_means.html">k_means()</a></code> model, the argument
name for the number of clusters are called "num_clusters" instead of "k" to
make it more general and usable across different types of models (and to not
be specific to a particular model function). The elements of <code>args</code> can
<code><a href="https://hardhat.tidymodels.org/reference/tune.html" class="external-link">tune()</a></code> with the use in <code><a href="tune_cluster.html">tune_cluster()</a></code>.</p></li>
</ul><p>For more information see <a href="https://www.tidymodels.org/start/tuning/" class="external-link">https://www.tidymodels.org/start/tuning/</a>. If left
to their defaults (<code>NULL</code>), the arguments will use the underlying model
functions default value. As discussed below, the arguments in <code>args</code> are
captured as quosures and are not immediately executed.</p><ul><li><p><code>...</code>: Optional model-function-specific parameters. As with <code>args</code>, these
will be quosures and can be <code><a href="https://hardhat.tidymodels.org/reference/tune.html" class="external-link">tune()</a></code>.</p></li>
<li><p><code>mode</code>: The type of model, such as "partition". Other modes will be added
once the package adds more functionality.</p></li>
<li><p><code>method</code>: This is a slot that is filled in later by the model's constructor
function. It generally contains lists of information that are used to
create the fit and prediction code as well as required packages and similar
data.</p></li>
<li><p><code>engine</code>: This character string declares exactly what software will be
used. It can be a package name or a technology type.</p></li>
</ul><p>This class and structure is the basis for how <span class="pkg">tidyclust</span> stores model
objects prior to seeing the data.</p>
    </div>
    <div class="section level2">
    <h2 id="argument-details">Argument Details<a class="anchor" aria-label="anchor" href="#argument-details"></a></h2>



<p>An important detail to understand when creating model specifications is that
they are intended to be functionally independent of the data. While it is
true that some tuning parameters are <em>data dependent</em>, the model
specification does not interact with the data at all.</p>
<p>For example, most R functions immediately evaluate their arguments. For
example, when calling <code>mean(dat_vec)</code>, the object <code>dat_vec</code> is immediately
evaluated inside of the function.</p>
<p><code>tidyclust</code> model functions do not do this. For example, using</p>
<div class="sourceCode"><pre><code><span></span>
<span>  <span class="fu"><a href="../reference/k_means.html">k_means</a></span><span class="op">(</span>num_clusters <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">ncol</a></span><span class="op">(</span><span class="va">mtcars</span><span class="op">)</span> <span class="op">/</span> <span class="fl">5</span><span class="op">)</span></span></code></pre></div>

<p><strong>does not</strong> execute <code>ncol(mtcars) / 5</code> when creating the specification.
This can be seen in the output:</p>
<div class="sourceCode"><pre><code>
  &gt; k_means(num_clusters = ncol(mtcars) / 5)
  K Means Cluster Specification (partition)

  Main Arguments:
    num_clusters = ncol(mtcars)/5

  Computational engine: stats
</code></pre></div>

<p>The model functions save the argument <em>expressions</em> and their associated
environments (a.k.a. a quosure) to be evaluated later when either
<code><a href="fit.html">fit.cluster_spec()</a></code> or <code><a href="fit.html">fit_xy.cluster_spec()</a></code> are called with the actual
data.</p>
<p>The consequence of this strategy is that any data required to get the
parameter values must be available when the model is fit. The two main ways
that this can fail is if:</p>
<ol><li><p>The data have been modified between the creation of the model
specification and when the model fit function is invoked.</p></li>
<li><p>If the model specification is saved and loaded into a new session
where those same data objects do not exist.</p></li>
</ol><p>The best way to avoid these issues is to not reference any data objects in
the global environment but to use data descriptors such as <code>.cols()</code>. Another
way of writing the previous specification is</p>
<div class="sourceCode"><pre><code><span></span>
<span>  <span class="fu"><a href="../reference/k_means.html">k_means</a></span><span class="op">(</span>num_clusters <span class="op">=</span> <span class="fu">.cols</span><span class="op">(</span><span class="op">)</span> <span class="op">/</span> <span class="fl">5</span><span class="op">)</span></span></code></pre></div>

<p>This is not dependent on any specific data object and is evaluated
immediately before the model fitting process begins.</p>
<p>One less advantageous approach to solving this issue is to use
quasiquotation. This would insert the actual R object into the model
specification and might be the best idea when the data object is small. For
example, using</p>
<div class="sourceCode"><pre><code><span></span>
<span>  <span class="fu"><a href="../reference/k_means.html">k_means</a></span><span class="op">(</span>num_clusters <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">ncol</a></span><span class="op">(</span><span class="op">!</span><span class="op">!</span><span class="va">mtcars</span><span class="op">)</span> <span class="op">-</span> <span class="fl">1</span><span class="op">)</span></span></code></pre></div>

<p>would work (and be reproducible between sessions) but embeds the entire
mtcars data set into the <code>num_clusters</code> expression:</p>
<div class="sourceCode"><pre><code>
 &gt; k_means(num_clusters = ncol(!!mtcars) / 5)
 K Means Cluster Specification (partition)

 Main Arguments:
   num_clusters = ncol(structure(list(mpg = c(21, 21, 22.8, 21.4, 18.7,&lt;snip&gt;

 Computational engine: stats
</code></pre></div>

<p>However, if there were an object with the number of columns in it, this
wouldn't be too bad:</p>
<div class="sourceCode"><pre><code>
 &gt; num_clusters_val &lt;- ncol(mtcars) / 5
 &gt; num_clusters_val
 [1] 10
 &gt; k_means(num_clusters = !!num_clusters_val)
 K Means Cluster Specification (partition)

 Main Arguments:
   num_clusters = 2.2
</code></pre></div>

<p>More information on quosures and quasiquotation can be found at
<a href="https://adv-r.hadley.nz/quasiquotation.html" class="external-link">https://adv-r.hadley.nz/quasiquotation.html</a>.</p>
    </div>

  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


   </div>
  <footer><div class="container">
  <div class="pkgdown-footer-left">
  <p>Developed by Emil Hvitfeldt, Kelly Bodwin, <a href="https://www.posit.co" class="external-link"><img src="https://www.tidyverse.org/posit-logo.svg" alt="Posit" height="16" width="62" style="margin-bottom: 3px;"></a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

  </div></footer></body></html>

